(this.webpackJsonpbluebird_ci=this.webpackJsonpbluebird_ci||[]).push([[0],{74:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(38),r=a.n(c),i=a(4),o=a.n(i),u=a(8),l=a(3),j=a(15),b=a(5),d=a(13),O=a(17),p=a(7),x=a.n(p),m=a(41),h=new(a(81).a),f=a(0),v=function(e){var t=e.setUserObj,a=Object(n.useState)(""),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(""),j=Object(l.a)(i,2),b=j[0],p=j[1],v=Object(n.useState)(!0),g=Object(l.a)(v,2),w=g[0],N=g[1],y=Object(n.useState)(!1),k=Object(l.a)(y,2),S=k[0],B=k[1],_=Object(n.useState)(null),C=Object(l.a)(_,2),I=C[0],F=C[1],U=function(e){var t=e.target,a=t.name,n=t.value;"username"===a?r(n):"password"===a&&p(n)},A=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n={username:c,password:b},!w){e.next=18;break}return console.log("\ud68c\uc6d0\uac00\uc785"),e.prev=4,B(!0),e.next=8,x.a.post("user/join",n);case 8:s=e.sent,t(s.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),e.t0.response&&F(e.t0.response.data);case 15:B(!1),e.next=32;break;case 18:return console.log("\ub85c\uadf8\uc778"),e.prev=19,B(!0),e.next=23,x.a.post("/user/login",n);case 23:r=e.sent,i="myToken",o=r.data.token,u=void 0,h.set(i,o,Object(m.a)({},u)),t(r.data.user),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(19),e.t1.response&&F(e.t1.response.data);case 31:B(!1);case 32:case"end":return e.stop()}var i,o,u}),e,null,[[4,12],[19,28]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/auth/google/callback");case 2:a=e.sent,console.log(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):Object(f.jsxs)("div",{className:"authContainer",children:[Object(f.jsx)(d.a,{icon:O.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(f.jsxs)("form",{onSubmit:A,className:"container",children:[Object(f.jsx)("input",{type:"text",name:"username",placeholder:"Username",required:!0,value:c,onChange:U,className:"authInput"}),Object(f.jsx)("input",{type:"password",name:"password",placeholder:"Passoword",required:!0,value:b,onChange:U,className:"authInput"}),Object(f.jsxs)("span",{className:"errMsg",children:[" ",I," "]}),Object(f.jsx)("input",{type:"submit",value:w?"Create Account":"Log In",className:"authInput authSubmit"})]}),Object(f.jsxs)("span",{onClick:function(){return N((function(e){return!e}))},className:"authSwitch",children:[w?"Sign In":"Create Account"," "]}),Object(f.jsxs)("div",{className:"authBtns",children:[Object(f.jsxs)("button",{onClick:E,name:"google",className:"authBtn",children:["Continue with Google ",Object(f.jsx)(d.a,{icon:O.b})]}),Object(f.jsxs)("button",{onClick:E,name:"github",className:"authBtn",children:["Continue with Github ",Object(f.jsx)(d.a,{icon:O.a})]})]})]})},g=a(26),w=a(19),N=function(e){var t=e.nweetObj,a=e.isOwner,s=e.setNweets,c=e.nweets,r=Object(n.useState)(!1),i=Object(l.a)(r,2),j=i[0],b=i[1],O=Object(n.useState)(t.body),p=Object(l.a)(O,2),m=p[0],h=p[1],v=Object(n.useState)(!1),N=Object(l.a)(v,2),y=N[0],k=N[1],S=Object(n.useState)(null),B=Object(l.a)(S,2),_=B[0],C=B[1],I=function(){b((function(e){return!e}))},F=function(){var e=Object(u.a)(o.a.mark((function e(){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\uc218\uc815"),m&&m.trim()){e.next=3;break}return e.abrupt("return",alert("\uac8c\uc2dc\uae00\uc744 \uc785\ub825\ud558\uc138\uc694"));case 3:return a={id:t._id,body:m},e.prev=4,k(!0),e.next=8,x.a.post("/post/update",a);case 8:n=e.sent,console.log(n.data),r=c.filter((function(e){return e._id!==t._id})),s([n.data.updatedPost].concat(Object(g.a)(r))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),C(e.t0);case 17:k(!1),h(""),b(!1);case 20:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\uc0ad\uc81c"),e.prev=1,k(!0),e.next=5,x.a.delete("/post/".concat(t._id));case 5:"\uc0ad\uc81c\uc644\ub8cc"===e.sent.data.message&&s(c.filter((function(e){return e._id!==t._id}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),C(e.t0);case 12:k(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return y?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):_?Object(f.jsx)("div",{className:"statusBar",children:"Error!"}):Object(f.jsx)("div",{className:"nweet",children:j?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("form",{onSubmit:F,className:"container nweetEdit",children:[Object(f.jsx)("input",{type:"text",placeholder:"Edit your nweet",value:m,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;h(t)},className:"formInput"}),Object(f.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),Object(f.jsx)("span",{onClick:I,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"nweet_body",children:t.body}),a&&Object(f.jsxs)("div",{class:"nweet__actions",children:[Object(f.jsx)("span",{onClick:U,children:Object(f.jsx)(d.a,{icon:w.b})}),Object(f.jsx)("span",{onClick:I,children:Object(f.jsx)(d.a,{icon:w.a})})]})]})})},y=function(e){var t=e.userObj,a=(e.fetchData,e.setNweets),s=e.nweets,c=Object(n.useState)(""),r=Object(l.a)(c,2),i=r[0],j=r[1],b=Object(n.useState)(!1),d=Object(l.a)(b,2),O=d[0],p=d[1],m=Object(n.useState)(null),h=Object(l.a)(m,2),v=h[0],w=h[1],N=function(){var e=Object(u.a)(o.a.mark((function e(n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i&&i.trim()){e.next=3;break}return e.abrupt("return",alert("\uac8c\uc2dc\uae00\uc744 \uc785\ub825\ud558\uc138\uc694"));case 3:return c={id:t._id,body:i},e.prev=4,p(!0),e.next=8,x.a.post("/post/add",c);case 8:r=e.sent,console.log("\ubc1b\uc544\uc628 \uc0c8\uac8c\uc2dc\ubb3c",r.data.newPost),a([r.data.newPost].concat(Object(g.a)(s))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),w(e.t0);case 16:p(!1),j("");case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return O?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):v?Object(f.jsx)("div",{className:"statusBar",children:"Error!"}):Object(f.jsx)("form",{onSubmit:N,className:"factoryForm",children:Object(f.jsxs)("div",{className:"factoryInput__container",children:[Object(f.jsx)("input",{className:"factoryInput__input",value:i,onChange:function(e){var t=e.target.value;j(t)},type:"text",placeholder:"what's on your mind?",maxLength:120}),Object(f.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]})})},k=function(e){var t=e.userObj,a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(!1),j=Object(l.a)(i,2),b=j[0],d=j[1],O=Object(n.useState)(null),p=Object(l.a)(O,2),m=p[0],h=p[1],v=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\uac8c\uc2dc\uae00\uac31\uc2e0"),e.prev=1,d(!0),e.next=5,x.a.get("/post");case 5:t=e.sent,console.log("\uc804\uccb4\uac8c\uc2dc\ubb3c",t.data.posts),r(t.data.posts),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),h(e.t0);case 13:d(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){v()}),[]),b?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):m?Object(f.jsx)("div",{className:"statusBar",children:"Error!"}):Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(y,{fetchData:v,userObj:t,setNweets:r,nweets:c}),Object(f.jsx)("div",{style:{marginTop:30},children:!!c&&c.map((function(e){return Object(f.jsx)(N,{nweetObj:e,isOwner:e.userId===t._id,setNweets:r,nweets:c},e._id)}))})]})},S=function(e){var t=e.setUserObj,a=e.userObj,s=Object(n.useState)(a.name),c=Object(l.a)(s,2),r=c[0],i=c[1],j=Object(b.f)(),d=Object(n.useState)(!1),O=Object(l.a)(d,2),p=O[0],m=O[1],h=Object(n.useState)(null),v=Object(l.a)(h,2),g=v[0],w=v[1],N=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(),j.push("/");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(o.a.mark((function e(n){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log(r),s={name:r,id:a._id},a.username===r){e.next=19;break}return e.prev=4,m(!0),e.next=8,x.a.post("/user/update",s);case 8:c=e.sent,console.log("\ubc1b\uc544\uc628 \uc720\uc800",c.data.newUser),t(c.data.newUser),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),w(e.t0.response),console.log(e.t0);case 17:m(!1),j.push("/");case 19:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):g?Object(f.jsx)("div",{className:"statusBar",children:"Error!"}):Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("form",{onSubmit:y,className:"profileForm",children:[Object(f.jsx)("input",{onChange:function(e){var t=e.target.value;i(t)},type:"text",autoFocus:!0,placeholder:"Display name",value:r,className:"formInput"}),Object(f.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),Object(f.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:N,children:"Log Out"})]})},B=function(e){var t=e.userObj;return Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(f.jsx)("li",{children:Object(f.jsx)(j.b,{to:"/",style:{marginRight:10},children:Object(f.jsx)(d.a,{icon:O.c,color:"#04AAFF",size:"2x"})})}),Object(f.jsx)("li",{children:Object(f.jsxs)(j.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(f.jsx)(d.a,{icon:w.c,color:"#04AAFF",size:"2x"}),Object(f.jsx)("span",{style:{marginTop:10},children:t.username?"".concat(t.username,"\uc758 Profile"):"Profile"})]})})]})})},_=function(e){var t=e.setUserObj,a=e.userObj,n=e.isLoggedIn;return Object(f.jsxs)(j.a,{children:[n&&Object(f.jsx)(B,{userObj:a}),Object(f.jsx)(b.c,{children:n?Object(f.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(f.jsx)(b.a,{exact:!0,path:"/",children:Object(f.jsx)(k,{userObj:a})}),Object(f.jsx)(b.a,{exact:!0,path:"/profile",children:Object(f.jsx)(S,{setUserObj:t,userObj:a})})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{exact:!0,path:"/",children:Object(f.jsx)(v,{setUserObj:t})})})})]})};var C=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),r=Object(l.a)(c,2),i=r[0],j=r[1],b=Object(n.useState)(null),d=Object(l.a)(b,2),O=(d[0],d[1]),p=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\uc720\uc800\ud1a0\ud070 \uc7ac\ubc1c\uae09"),e.prev=1,j(!0),e.next=5,x()({method:"get",url:"/user",headers:{"Content-Type":"application/json",Authorization:"".concat((a="myToken",h.get(a)))}});case 5:(t=e.sent).data.user&&s(t.data.user),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O(e.t0);case 12:j(!1);case 13:case"end":return e.stop()}var a}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log("\uccab \ub80c\ub354, \uc0c8\ub85c\uace0\uce68 \uc2dc \uc720\uc800 \ubd88\ub7ec\uc624\uae30"),p()}),[]),i?Object(f.jsxs)("div",{className:"loadingBox",children:[Object(f.jsx)("div",{className:"dim"}),Object(f.jsx)("div",{className:"circle"})]}):Object(f.jsx)(_,{setUserObj:s,userObj:a,isLoggedIn:Boolean(a)})},I=(a(74),a(75),window);x.a.defaults.baseURL=I.API_URL,r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.83806575.chunk.js.map