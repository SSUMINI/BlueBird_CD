{"ast":null,"code":"import _regeneratorRuntime from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Nweet from\"../components/Nweet\";import NweetFactory from\"../components/NweetFactory\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialV=[{id:0,body:\"ex 0\",userId:0,creator:\"me\"},{id:1,body:\"ex 1\",userId:0,creator:\"me\"}];var Home=function Home(_ref){var userObj=_ref.userObj;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),nweets=_useState2[0],setNweets=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// 첫 렌더 & 갱신 게시글 불러오기(GET:/posts)\nvar fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"게시글갱신\");_context.prev=1;setLoading(true);_context.next=5;return axios.get(\"/post\");case 5:result=_context.sent;// const result = await axios.get(\"http://localhost:3005/board\");\nconsole.log(\"전체게시물\",result.data.posts);setNweets(result.data.posts);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setError(_context.t0);case 13:setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"loadingBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})]});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"statusBar\",children:\"Error!\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(NweetFactory,{fetchData:fetchData,userObj:userObj,setNweets:setNweets,nweets:nweets}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:30},children:!!nweets&&nweets.map(function(nweet){return/*#__PURE__*/_jsx(Nweet,{nweetObj:nweet,isOwner:nweet.userId===userObj._id,setNweets:setNweets,nweets:nweets},nweet._id);})})]});};export default Home;","map":{"version":3,"sources":["/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/src/routes/Home.js"],"names":["React","useEffect","useState","Nweet","NweetFactory","axios","initialV","id","body","userId","creator","Home","userObj","nweets","setNweets","loading","setLoading","error","setError","fetchData","console","log","get","result","data","posts","marginTop","map","nweet","_id"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,CACf,CAAEC,EAAE,CAAE,CAAN,CAASC,IAAI,CAAE,MAAf,CAAuBC,MAAM,CAAE,CAA/B,CAAkCC,OAAO,CAAE,IAA3C,CADe,CAEf,CAAEH,EAAE,CAAE,CAAN,CAASC,IAAI,CAAE,MAAf,CAAuBC,MAAM,CAAE,CAA/B,CAAkCC,OAAO,CAAE,IAA3C,CAFe,CAAjB,CAKA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAC5B,cAA4BV,QAAQ,CAAC,EAAD,CAApC,wCAAOW,MAAP,eAAeC,SAAf,eACA,eAA8BZ,QAAQ,CAAC,KAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAA0Bd,QAAQ,CAAC,IAAD,CAAlC,yCAAOe,KAAP,eAAcC,QAAd,eAEA;AACA,GAAMC,CAAAA,SAAS,2FAAG,8IAChBC,OAAO,CAACC,GAAR,CAAY,OAAZ,EADgB,gBAGdL,UAAU,CAAC,IAAD,CAAV,CAHc,sBAIOX,CAAAA,KAAK,CAACiB,GAAN,CAAU,OAAV,CAJP,QAIRC,MAJQ,eAKd;AACAH,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBE,MAAM,CAACC,IAAP,CAAYC,KAAjC,EACAX,SAAS,CAACS,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAT,CAPc,iFASdP,QAAQ,aAAR,CATc,QAWhBF,UAAU,CAAC,KAAD,CAAV,CAXgB,qEAAH,kBAATG,CAAAA,SAAS,2CAAf,CAcAlB,SAAS,CAAC,UAAM,CACdkB,SAAS,GACV,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIJ,OAAJ,CACE,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,KAAf,EADF,cAEE,YAAK,SAAS,CAAC,QAAf,EAFF,GADF,CAMF,GAAIE,KAAJ,CAAW,mBAAO,YAAK,SAAS,CAAC,WAAf,oBAAP,CAEX,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,YAAD,EACE,SAAS,CAAEE,SADb,CAEE,OAAO,CAAEP,OAFX,CAGE,SAAS,CAAEE,SAHb,CAIE,MAAM,CAAED,MAJV,EADF,cAOE,YAAK,KAAK,CAAE,CAAEa,SAAS,CAAE,EAAb,CAAZ,UACG,CAAC,CAACb,MAAF,EACCA,MAAM,CAACc,GAAP,CAAW,SAACC,KAAD,qBACT,KAAC,KAAD,EAEE,QAAQ,CAAEA,KAFZ,CAGE,OAAO,CAAEA,KAAK,CAACnB,MAAN,GAAiBG,OAAO,CAACiB,GAHpC,CAIE,SAAS,CAAEf,SAJb,CAKE,MAAM,CAAED,MALV,EACOe,KAAK,CAACC,GADb,CADS,EAAX,CAFJ,EAPF,GADF,CAsBD,CAvDD,CAyDA,cAAelB,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Nweet from \"../components/Nweet\";\nimport NweetFactory from \"../components/NweetFactory\";\nimport axios from \"axios\";\n\nconst initialV = [\n  { id: 0, body: \"ex 0\", userId: 0, creator: \"me\" },\n  { id: 1, body: \"ex 1\", userId: 0, creator: \"me\" },\n];\n\nconst Home = ({ userObj }) => {\n  const [nweets, setNweets] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // 첫 렌더 & 갱신 게시글 불러오기(GET:/posts)\n  const fetchData = async () => {\n    console.log(\"게시글갱신\");\n    try {\n      setLoading(true);\n      const result = await axios.get(\"/post\");\n      // const result = await axios.get(\"http://localhost:3005/board\");\n      console.log(\"전체게시물\", result.data.posts);\n      setNweets(result.data.posts);\n    } catch (e) {\n      setError(e);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (loading)\n    return (\n      <div className=\"loadingBox\">\n        <div className=\"dim\"></div>\n        <div className=\"circle\"></div>\n      </div>\n    );\n  if (error) return <div className=\"statusBar\">Error!</div>;\n\n  return (\n    <div className=\"container\">\n      <NweetFactory\n        fetchData={fetchData}\n        userObj={userObj}\n        setNweets={setNweets}\n        nweets={nweets}\n      />\n      <div style={{ marginTop: 30 }}>\n        {!!nweets &&\n          nweets.map((nweet) => (\n            <Nweet\n              key={nweet._id}\n              nweetObj={nweet}\n              isOwner={nweet.userId === userObj._id}\n              setNweets={setNweets}\n              nweets={nweets}\n            />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}