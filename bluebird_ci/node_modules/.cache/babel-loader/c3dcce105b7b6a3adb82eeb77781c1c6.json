{"ast":null,"code":"import _regeneratorRuntime from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import AppRouter from\"./components/Router\";import axios from\"axios\";import{getCookie}from\"../src/cookies\";// const fakeUser = { id: 0, name: \"hs\" };\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),userObj=_useState2[0],setUserObj=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"유저토큰 재발급\");_context.prev=1;setLoading(true);_context.next=5;return axios({method:\"get\",url:\"/user\",headers:{\"Content-Type\":\"application/json\",Authorization:\"\".concat(getCookie(\"myToken\"))}});case 5:result=_context.sent;if(result.data.user){setUserObj(result.data.user);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setError(_context.t0);case 12:setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();// 유저 불러오기\nuseEffect(function(){console.log(\"첫 렌더, 새로고침 시 유저 불러오기\");fetchUser();},[]);if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"loadingBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})]});// if (error) return <div className=\"statusBar\">Error!</div>;\nreturn/*#__PURE__*/_jsx(AppRouter,{setUserObj:setUserObj,userObj:userObj,isLoggedIn:Boolean(userObj)});}export default App;","map":{"version":3,"sources":["/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/src/App.js"],"names":["React","useState","useEffect","AppRouter","axios","getCookie","App","userObj","setUserObj","loading","setLoading","error","setError","fetchUser","console","log","method","url","headers","Authorization","result","data","user","Boolean"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,gBAA1B,CAEA;wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAA8BL,QAAQ,EAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAA8BP,QAAQ,CAAC,KAAD,CAAtC,yCAAOQ,OAAP,eAAgBC,UAAhB,eACA,eAA0BT,QAAQ,CAAC,IAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,SAAS,0FAAG,8IAChBC,OAAO,CAACC,GAAR,CAAY,UAAZ,EADgB,gBAGdL,UAAU,CAAC,IAAD,CAAV,CAHc,sBAKON,CAAAA,KAAK,CAAC,CACzBY,MAAM,CAAE,KADiB,CAEzBC,GAAG,CAAE,OAFoB,CAGzBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,WAAKd,SAAS,CAAC,SAAD,CAAd,CAFN,CAHgB,CAAD,CALZ,QAKRe,MALQ,eAad,GAAIA,MAAM,CAACC,IAAP,CAAYC,IAAhB,CAAsB,CACpBd,UAAU,CAACY,MAAM,CAACC,IAAP,CAAYC,IAAb,CAAV,CACD,CAfa,+EAiBdV,QAAQ,aAAR,CAjBc,QAmBhBF,UAAU,CAAC,KAAD,CAAV,CAnBgB,oEAAH,kBAATG,CAAAA,SAAS,0CAAf,CAsBA;AACAX,SAAS,CAAC,UAAM,CACdY,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACAF,SAAS,GACV,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAIJ,OAAJ,CACE,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,KAAf,EADF,cAEE,YAAK,SAAS,CAAC,QAAf,EAFF,GADF,CAMF;AAEA,mBACE,KAAC,SAAD,EACE,UAAU,CAAED,UADd,CAEE,OAAO,CAAED,OAFX,CAGE,UAAU,CAAEgB,OAAO,CAAChB,OAAD,CAHrB,EADF,CAOD,CAED,cAAeD,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AppRouter from \"./components/Router\";\nimport axios from \"axios\";\nimport { getCookie } from \"../src/cookies\";\n\n// const fakeUser = { id: 0, name: \"hs\" };\n\nfunction App() {\n  const [userObj, setUserObj] = useState();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchUser = async () => {\n    console.log(\"유저토큰 재발급\");\n    try {\n      setLoading(true);\n\n      const result = await axios({\n        method: \"get\",\n        url: \"/user\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `${getCookie(\"myToken\")}`,\n        },\n      });\n      if (result.data.user) {\n        setUserObj(result.data.user);\n      }\n    } catch (e) {\n      setError(e);\n    }\n    setLoading(false);\n  };\n\n  // 유저 불러오기\n  useEffect(() => {\n    console.log(\"첫 렌더, 새로고침 시 유저 불러오기\");\n    fetchUser();\n  }, []);\n\n  if (loading)\n    return (\n      <div className=\"loadingBox\">\n        <div className=\"dim\"></div>\n        <div className=\"circle\"></div>\n      </div>\n    );\n  // if (error) return <div className=\"statusBar\">Error!</div>;\n\n  return (\n    <AppRouter\n      setUserObj={setUserObj}\n      userObj={userObj}\n      isLoggedIn={Boolean(userObj)}\n    />\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}