{"ast":null,"code":"import _regeneratorRuntime from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NweetFactory=function NweetFactory(_ref){var userObj=_ref.userObj,fetchData=_ref.fetchData,setNweets=_ref.setNweets,nweets=_ref.nweets;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),nweet=_useState2[0],setNweet=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!nweet||!nweet.trim())){_context.next=3;break;}return _context.abrupt(\"return\",alert(\"게시글을 입력하세요\"));case 3:data={id:userObj._id,body:nweet};_context.prev=4;setLoading(true);_context.next=8;return axios.post(\"/post/add\",data);case 8:result=_context.sent;console.log(\"받아온 새게시물\",result.data.newPost);setNweets([result.data.newPost].concat(_toConsumableArray(nweets)));_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);setError(_context.t0);case 16:setLoading(false);setNweet(\"\");case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var onChange=function onChange(e){var value=e.target.value;setNweet(value);};if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"loadingBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})]});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"statusBar\",children:\"Error!\"});return/*#__PURE__*/_jsx(\"form\",{onSubmit:onSubmit,className:\"factoryForm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"factoryInput__container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"factoryInput__input\",value:nweet,onChange:onChange,type:\"text\",placeholder:\"what's on your mind?\",maxLength:120}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\u2192\",className:\"factoryInput__arrow\"})]})});};export default NweetFactory;","map":{"version":3,"sources":["/home/jenkins/agent/workspace/react-front-build_CI/bluebird_ci/src/components/NweetFactory.js"],"names":["React","useState","axios","NweetFactory","userObj","fetchData","setNweets","nweets","nweet","setNweet","loading","setLoading","error","setError","onSubmit","e","preventDefault","trim","alert","data","id","_id","body","post","result","console","log","newPost","onChange","value","target"],"mappings":"ytBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA+C,IAA5CC,CAAAA,OAA4C,MAA5CA,OAA4C,CAAnCC,SAAmC,MAAnCA,SAAmC,CAAxBC,SAAwB,MAAxBA,SAAwB,CAAbC,MAAa,MAAbA,MAAa,CAClE,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA8BR,QAAQ,CAAC,KAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA0BV,QAAQ,CAAC,IAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,QAAQ,2FAAG,iBAAOC,CAAP,kIACfA,CAAC,CAACC,cAAF,GADe,KAEX,CAACR,KAAD,EAAU,CAACA,KAAK,CAACS,IAAN,EAFA,0DAGNC,KAAK,CAAC,YAAD,CAHC,SAKTC,IALS,CAKF,CAAEC,EAAE,CAAEhB,OAAO,CAACiB,GAAd,CAAmBC,IAAI,CAAEd,KAAzB,CALE,iBAObG,UAAU,CAAC,IAAD,CAAV,CAPa,sBAQQT,CAAAA,KAAK,CAACqB,IAAN,CAAW,WAAX,CAAwBJ,IAAxB,CARR,QAQPK,MARO,eASbC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBF,MAAM,CAACL,IAAP,CAAYQ,OAApC,EACArB,SAAS,EAAEkB,MAAM,CAACL,IAAP,CAAYQ,OAAd,4BAA0BpB,MAA1B,GAAT,CAVa,iFAYbM,QAAQ,aAAR,CAZa,QAcfF,UAAU,CAAC,KAAD,CAAV,CACAF,QAAQ,CAAC,EAAD,CAAR,CAfe,qEAAH,kBAARK,CAAAA,QAAQ,6CAAd,CAkBA,GAAMc,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACb,CAAD,CAAO,CACtB,GAAQc,CAAAA,KAAR,CAAkBd,CAAC,CAACe,MAApB,CAAQD,KAAR,CACApB,QAAQ,CAACoB,KAAD,CAAR,CACD,CAHD,CAKA,GAAInB,OAAJ,CACE,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,KAAf,EADF,cAEE,YAAK,SAAS,CAAC,QAAf,EAFF,GADF,CAMF,GAAIE,KAAJ,CAAW,mBAAO,YAAK,SAAS,CAAC,WAAf,oBAAP,CAEX,mBACE,aAAM,QAAQ,CAAEE,QAAhB,CAA0B,SAAS,CAAC,aAApC,uBACE,aAAK,SAAS,CAAC,yBAAf,wBACE,cACE,SAAS,CAAC,qBADZ,CAEE,KAAK,CAAEN,KAFT,CAGE,QAAQ,CAAEoB,QAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,WAAW,CAAC,sBALd,CAME,SAAS,CAAE,GANb,EADF,cASE,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,SAAS,CAAC,qBAA9C,EATF,GADF,EADF,CAeD,CApDD,CAsDA,cAAezB,CAAAA,YAAf","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst NweetFactory = ({ userObj, fetchData, setNweets, nweets }) => {\n  const [nweet, setNweet] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    if (!nweet || !nweet.trim()) {\n      return alert(\"게시글을 입력하세요\");\n    }\n    const data = { id: userObj._id, body: nweet };\n    try {\n      setLoading(true);\n      const result = await axios.post(\"/post/add\", data);\n      console.log(\"받아온 새게시물\", result.data.newPost);\n      setNweets([result.data.newPost, ...nweets]);\n    } catch (e) {\n      setError(e);\n    }\n    setLoading(false);\n    setNweet(\"\");\n  };\n\n  const onChange = (e) => {\n    const { value } = e.target;\n    setNweet(value);\n  };\n\n  if (loading)\n    return (\n      <div className=\"loadingBox\">\n        <div className=\"dim\"></div>\n        <div className=\"circle\"></div>\n      </div>\n    );\n  if (error) return <div className=\"statusBar\">Error!</div>;\n\n  return (\n    <form onSubmit={onSubmit} className=\"factoryForm\">\n      <div className=\"factoryInput__container\">\n        <input\n          className=\"factoryInput__input\"\n          value={nweet}\n          onChange={onChange}\n          type=\"text\"\n          placeholder=\"what's on your mind?\"\n          maxLength={120}\n        />\n        <input type=\"submit\" value=\"&rarr;\" className=\"factoryInput__arrow\" />\n      </div>\n    </form>\n  );\n};\n\nexport default NweetFactory;\n"]},"metadata":{},"sourceType":"module"}